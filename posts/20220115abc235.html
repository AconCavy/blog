<!DOCTYPE html><html lang="ja"><head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline';
img-src 'self' * data: *.w3.org; 
child-src 'none';
frame-src 'self' *.twitter.com;
font-src 'self' *.fontawesome.com;
connect-src 'self' *.fontawesome.com *.typekit.net;
style-src 'self' 'unsafe-inline';
script-src 'self' 'unsafe-eval' *.twitter.com *.typekit.net;">

    <title>acon.log - ABC235</title>

    <link rel="icon" href="/assets/images/favicon.svg" type="text/svg+xml">
    <link href="/mirror/cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <script src="/assets/vendor/adobe/adobe_fonts.js"></script>

    
<meta property="og:title" content="ABC235">
<meta property="og:description" content="">
<meta property="og:image" content="https://aconcavy.github.io/assets/images/icon.webp">
<meta property="og:url" content="https://aconcavy.github.io/posts/20220115abc235">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="acon.log">
<meta name="twitter:image" content="https://aconcavy.github.io/assets/images/icon.webp">


</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow-sm" id="mainNav">
    <div class="container">
        <a class="navbar-brand" href="/">acon.log</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
    <li class="nav-item">
        <a class="nav-link" href="/posts">Posts</a>
    </li>
</ul>

        </div>
    </div>
</nav>


<header>
</header>


<div class="container">
    <div class="row">
        <div id="content">

                <div class="card shadow-sm">
                    <div class="card-body p-md-5">
                        
<div class="post-header mb-5">
    <h1 class="card-title post-title">ABC235</h1>

    <div class="card-text post-meta">
        Published on Saturday, 15 January 2022
    </div>
    <div class="card-text post-meta">
        Updated on Sunday, 16 January 2022
    </div>

        <div class="mt-3 mb-4">
                <a href="/tags/atcoder" class="badge badge-light"> atcoder</a>
                <a href="/tags/csharp" class="badge badge-light"> csharp</a>
        </div>

    <hr>
</div>

                        <div class="post-body">
                            <h2 id="section">はじめに</h2>
<p>AtCoder Beginner Contest 235の復習記事です。</p>
<p>記事における<code>Scanner</code>クラスは、自作の入力クラスです。</p>
<h2 id="section-1">コンテスト</h2>
<p><a href="https://atcoder.jp/contests/abc235">https://atcoder.jp/contests/abc235</a></p>
<h3 id="a"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_a">問題A</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28530777">コンテスト提出</a></p>
<p>各桁を移動させて足します。</p>
<pre><code class="language-csharp line-numbers">var V = Scanner.Scan&lt;string&gt;().Select(x =&gt; x - '0').ToArray();
var answer = 0;
answer += V[0] * 100 + V[1] * 10 + V[2];
answer += V[1] * 100 + V[2] * 10 + V[0];
answer += V[2] * 100 + V[0] * 10 + V[1];

Console.WriteLine(answer);
</code></pre>
<h3 id="b"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_b">問題B</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28530905">コンテスト提出</a></p>
<p>順にみて前回より大きい場合は<code>curr</code>を更新し、小さい場合は移動することができないため、<code>curr</code>を表示します。</p>
<pre><code class="language-csharp line-numbers">var N = Scanner.Scan&lt;int&gt;();
var H = Scanner.ScanEnumerable&lt;long&gt;().ToArray();
var curr = 0L;
for (var i = 0; i &lt; N; i++)
{
    if (curr &lt; H[i])
    {
        curr = H[i];
    }
    else
    {
        Console.WriteLine(curr);
        return;
    }
}

Console.WriteLine(curr);
</code></pre>
<h3 id="c"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_c">問題C</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28535489">コンテスト提出</a></p>
<p>クエリのたびにすべてを走査すると<code>O(N*Q)</code>となりTLEになるので、高速化する必要があります。
あらかじめ値をキーとした出現場所をもつ辞書を作成し、その値が何番目に出現するかを保持しておき、クエリによる<code>x</code>の値が存在して、<code>k</code>の値が辞書内に存在する<code>x</code>の個数以内ならばその出現場所を表示し、それ以外の場合は<code>-1</code>を表示することで、クエリ当たり<code>O(logN)</code>で実行することができるようになります。</p>
<pre><code class="language-csharp line-numbers">var (N, Q) = Scanner.Scan&lt;int, int&gt;();
var A = Scanner.ScanEnumerable&lt;int&gt;().ToArray();
var dict = new Dictionary&lt;int, List&lt;int&gt;&gt;();
for (var i = 0; i &lt; N; i++)
{
    if (!dict.ContainsKey(A[i])) dict[A[i]] = new List&lt;int&gt;();
    dict[A[i]].Add(i + 1);
}

while (Q-- &gt; 0)
{
    var (x, k) = Scanner.Scan&lt;int, int&gt;();
    k--;
    if (dict.ContainsKey(x))
    {
        if (k &lt; dict[x].Count)
        {
            Console.WriteLine(dict[x][k]);
        }
        else
        {
            Console.WriteLine(-1);
        }
    }
    else
    {
        Console.WriteLine(-1);
    }
}
</code></pre>
<h3 id="d"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_d">問題D</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28546896">コンテスト提出</a></p>
<p>各操作をBFSで走査することにより、各値の更新は高々1回のみで十分になります。<br>
シフト操作によって、<code>N</code>の値より大きい数から<code>N</code>より小さい値に変化する可能性もあるので、Nを文字列としてみたときの長さより大きい場合は無視することに注意します。<br>
<code>Shift</code>メソッドは配列を与えられた値だけシフトする関数です。</p>
<pre><code class="language-csharp line-numbers">var (A, N) = Scanner.Scan&lt;long, long&gt;();
var dp = new Dictionary&lt;long, int&gt;();
dp[1] = 0;

var queue = new Queue&lt;long&gt;();
queue.Enqueue(1);
const int inf = (int)1e7;

void Push(long curr, long next)
{
    if (next &gt; inf) return;
    if (dp.ContainsKey(next)) return;
    dp[next] = dp[curr] + 1;
    queue.Enqueue(next);
}

while (queue.Count &gt; 0)
{
    var u = queue.Dequeue();
    if (u &gt;= 10 &amp;&amp; u % 10 != 0)
    {
        var v = long.Parse(Shift(u.ToString().AsSpan(), 1));
        Push(u, v);
    }
    Push(u, u * A);
}
 
if (dp.ContainsKey(N))
{
    Console.WriteLine(dp[N]);
}
else
{
    Console.WriteLine(-1);
}
</code></pre>
<h3 id="e"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_e">問題E</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28551552">コンテスト提出</a></p>
<p>クエリごとに最小全域木を求めると、ソートに<code>(MlogM)</code>、クラスカル法で最小全域木を求めるために<code>O(Ea(V))</code>となり、TLEになってしまいます。
クエリに対してグラフはそれぞれ独立なため、あらかじめクエリを先読みしてすべての辺をまとめてソートし、クラスカル法で辺を見てその辺が有効な場合、もしその辺がクエリの辺である場合はそのクエリは有効であり、そうではない場合は最小全域木としてマージしていくことで、計算量を抑えることができます。</p>
<pre><code class="language-csharp line-numbers">var (N, M, Q) = Scanner.Scan&lt;int, int, int&gt;();
var E1 = new Edge[M];
var E2 = new Edge[Q];
for (var i = 0; i &lt; M; i++)
{
    var (a, b, c) = Scanner.Scan&lt;int, int, int&gt;();
    a--; b--;
    E1[i] = new Edge(-1, a, b, c);
}

for (var i = 0; i &lt; Q; i++)
{
    var (a, b, c) = Scanner.Scan&lt;int, int, int&gt;();
    a--; b--;
    E2[i] = new Edge(i, a, b, c);
}

var answer = new bool[Q];
var dsu = new DisjointSetUnion(N);
foreach (var e in E1.Concat(E2).OrderBy(x =&gt; x.Cost))
{
    if (dsu.IsSame(e.U, e.V)) continue;
    if (e.ID == -1)
    {
        dsu.Merge(e.U, e.V);
    }
    else
    {
        answer[e.ID] = true;
    }
}

Console.WriteLine(string.Join(&quot;\n&quot;, answer.Select(x =&gt; x ? &quot;Yes&quot; : &quot;No&quot;)));
</code></pre>
<h3 id="f"><a href="https://atcoder.jp/contests/abc235/tasks/abc235_f">問題F</a></h3>
<p><a href="https://atcoder.jp/contests/abc235/submissions/28569936">復習提出</a></p>
<p>コンテスト中の考察です。</p>
<ul>
<li>桁dp?</li>
<li><code>1&lt;&lt;10</code>(1024)通りの場合分け?</li>
<li>総和の数え方がわからない...</li>
</ul>
<pre><code class="language-csharp line-numbers">var dp = new mint[N + 1, 1 &lt;&lt; 10];
for(var i = 0; i &lt; S.Length; i++)
{
    for(var j = 0; j &lt; 1 &lt;&lt; 10; j++)
    {
        for(var k = 0; k &lt; 10; k++)
        {
            // dp[i + 1, j | (1 &lt;&lt; k)] = ?;
        }
    }
}
</code></pre>
<p>解説では、総和と個数をそれぞれ別に数え上げるそうです。
<code>mint</code>は、あまりをとる整数型です。</p>
<pre><code class="language-csharp line-numbers">var V = Scanner.Scan&lt;string&gt;().Select(x =&gt; x - '0').ToArray();
var N = V.Length;
var M = Scanner.Scan&lt;int&gt;();
var C = Scanner.ScanEnumerable&lt;int&gt;().ToArray();

var ok = 0;
foreach (var c in C)
{
    ok |= 1 &lt;&lt; c;
}

var max = 1 &lt;&lt; 10;
var count = new mint[2][] { new mint[max], new mint[max] };
var sum = new mint[2][] { new mint[max], new mint[max] };
mint curr = 0;
var digits = 0;

var t = 1;
for (var i = 0; i &lt; N; i++)
{
    t ^= 1;
    var tt = t ^ 1;
    var c = V[i];
    Array.Fill(count[tt], 0);
    Array.Fill(sum[tt], 0);
    for (var j = 0; j &lt; max; j++)
    {
        for (var d = 0; d &lt; 10; d++)
        {
            var next = j | (1 &lt;&lt; d);
            count[tt][next] += count[t][j];
            sum[tt][next] += sum[t][j] * 10 + count[t][j] * d;
        }
    }

    if (i &gt; 0)
    {
        for (var d = 1; d &lt; 10; d++)
        {
            var next = 1 &lt;&lt; d;
            count[tt][next]++;
            sum[tt][next] += d;
        }
    }

    for (var d = 0; d &lt; c; d++)
    {
        if (i == 0 &amp;&amp; d == 0) continue;
        var next = digits | (1 &lt;&lt; d);
        count[tt][next]++;
        sum[tt][next] += curr * 10 + d;
    }

    digits |= 1 &lt;&lt; c;
    curr = curr * 10 + c;
}

t ^= 1;
var answer = 0L;
for (var j = 0; j &lt; max; j++)
{
    if ((j &amp; ok) == ok)
    {
        answer += sum[t][j];
    }
}

if ((digits &amp; ok) == ok)
{
    answer += curr;
}

Console.WriteLine(answer);
</code></pre>

                        </div>
                        <div class="post-footer mt-5">
    <div class="share">
        <a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class="twitter-share-button" url="/posts/20220115abc235" data-size="large">
            Tweet
        </a>
    </div>

    <hr>

    <div class="row justify-content-center">
        <div class="col-md-3 mt-3">
            <img class="rounded-circle" src="/assets/images/icon.svg" alt="icon">
        </div>
        <div class="col-md-3 mt-3">
            <h5 class="card-text">AconCavy</h5>
            <div class="card-text">C#が好きなひきこもり</div>
            <a class="nav-link fab fa-twitter fa-2x" href="https://twitter.com/AconCavy"></a>
            <a class="nav-link fab fa-github fa-2x" href="https://github.com/AconCavy"></a>
        </div>
    </div>
</div>

                    </div>
                </div>

        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <p>Copyright &#xA9; 2020-2022 AconCavy</p>
                <ul class="list-inline text-center small">
                        <li class="list-inline-item">
                            <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        </li>
                        <li class="list-inline-item">
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        </li>
                </ul>
            </div>
        </div>
    </div>
</footer>


<script src="/mirror/cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="/mirror/cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>
<script src="/mirror/kit.fontawesome.com/defa8b99ee.js"></script>

<script src="/assets/vendor/prism/prism.js"></script>

<script async="" src="/mirror/platform.twitter.com/widgets.js" charset="utf-8"></script>





</body></html>